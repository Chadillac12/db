version: "1.0"

# -------------------------------------------------------------------
# SCHEMA DEFINITIONS
# -------------------------------------------------------------------
# This section defines the rules for each document type.
# - normalizer: The Python function to use (fcss, srs, generic, ssg).
# - required_columns: Columns that MUST exist in the input.
# - id_columns: Columns used to form the unique Requirement ID.
# - text_columns: Columns containing the requirement text.
# - trace_columns: Columns containing links to parents/children.
# - section_detection: Rules for identifying section headers.
# - inference: Rules for inferring context (e.g. from ID).
# -------------------------------------------------------------------
schema:
  documents:
    - doc_type: "FCSS"
      normalizer: "fcss"
      aliases: ["CSS"]
      required_columns:
        - "Requirement ID"
        - "Object Number"
        - "FCSS Requirement"
      id_columns: ["Requirement ID"]
      text_columns: ["FCSS Requirement"]
      optional_columns:
        - "Rationale"
        - "Verification Method"
        - "Comments"
      trace_columns:
        parents: ["Parent ID"]
        children: []
      section_detection:
        type_column: "Requirement Type"
        object_number_column: "Object Number"
        text_columns: ["FCSS Requirement"]
        header_types: ["Heading", "Section Header", "Title"]
      inference:
        inherit_section_context: true
        infer_from_req_id: false

    - doc_type: "SRS"
      normalizer: "srs"
      required_columns:
        - "SRS Section"
        - "Req't No"
        - "Requirement Text"
      id_columns: ["SRS Section", "Req't No"]
      text_columns: ["Requirement Text"]
      optional_columns:
        - "Rationale"
        - "Verification Method"
      trace_columns:
        parents: ["Traceability Doc Reqd #"]
        children: []
      inference:
        inherit_section_context: true
        infer_from_req_id: true  # SRS IDs often contain section info

    - doc_type: "FCSRD"
      normalizer: "generic"
      aliases: ["CCSRD", "FSRD"]
      required_columns:
        - "Requirement ID"
        - "Object Number"
        - "Derived Requirement"
      id_columns: ["Requirement ID"]
      text_columns: ["Derived Requirement"]
      optional_columns:
        - "Rationale"
        - "Allocation"
      trace_columns:
        parents: ["Out-links (FSRD)", "Out-links (System Requirement)"]
        children: ["In-links (SRS)"]
      section_detection:
        type_column: "Object Type"
        object_number_column: "Object Number"
        text_columns: ["Derived Requirement"]
        header_types: ["Heading", "Title"]

    - doc_type: "SSG"
      normalizer: "ssg"
      required_columns:
        - "ID"
        - "Systems/Software Guidelines (SSG)"
      id_columns: ["ID"]
      text_columns: ["Systems/Software Guidelines (SSG)"]
      optional_columns:
        - "Guideline Type"
      trace_columns:
        parents: []
        children: []

    - doc_type: "SCD"
      normalizer: "generic"
      required_columns:
        - "Requirement ID"
        - "Object Number"
        - "Requirement Text"
      id_columns: ["Requirement ID"]
      text_columns: ["Requirement Text"]
      trace_columns:
        parents: ["Parent Link"]
        children: []


# -------------------------------------------------------------------
# INPUT FILES
# -------------------------------------------------------------------
# List the files to process.
# - path: Relative or absolute path to the file (CSV or Excel).
# - doc_type: Must match a doc_type defined in the schema above.
# - doc_name: Unique name for this document instance.
# - level: System_High, System_Mid, Software_Low, etc.
# -------------------------------------------------------------------
inputs:
  # Example entries - replace with your actual files
  # - path: "data/fcss_v1.xlsx"
  #   doc_name: "Flight_Control_Specs"
  #   doc_type: "FCSS"
  #   level: "System_Mid"
  #   sheet_name: "Requirements" 

  # - path: "data/srs_flight_logic.csv"
  #   doc_name: "SRS_Flight_Logic"
  #   doc_type: "SRS"
  #   level: "Software_Low"
